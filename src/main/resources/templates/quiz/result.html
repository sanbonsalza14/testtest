<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"><title>OX í€´ì¦ˆ ê²°ê³¼</title>
    <link rel="stylesheet" th:href="@{/css/app.css}">
    <style>
        .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;max-width:560px}
        .card{border:1px solid #ddd;border-radius:10px;padding:16px;text-align:center;background:#fafafa}
        .num{font-size:28px;font-weight:700}
        .correct{color:blue}
        .wrong{color:red}
        .actions{margin-top:20px;display:flex;gap:8px}
        .btn{display:inline-flex;align-items:center;justify-content:center;min-width:120px;height:40px;padding:0 16px;
             border-radius:8px;border:1px solid #ddd;background:#fff;color:#111;text-decoration:none;font-size:14px}
        .btn--primary{background:#111;color:#fff;border-color:#111}
        table{border-collapse:collapse;width:100%;max-width:880px;margin-top:24px}
        th,td{border:1px solid #e5e5e5;padding:10px 12px;text-align:center}
        th{background:#fafafa}
        .nick{text-align:left}
        .medal{font-size:20px}
    </style>
    <link rel="stylesheet" th:href="@{/css/app.css}">

</head>
<body>
<h1>OX í€´ì¦ˆ ê²°ê³¼</h1>

<p><b>í”Œë ˆì´ì–´:</b> <span th:text="${email}">-</span></p>
<p><b>ì´ë²ˆ ë¼ìš´ë“œ:</b> <span th:text="${played}">0</span> / <span th:text="${max}">20</span></p>

<div class="grid">
    <div class="card">
        <div>ì´ë²ˆ ë¼ìš´ë“œ ì •ë‹µ</div>
        <div class="num correct" th:text="${rCorrect}">0</div>
    </div>
    <div class="card">
        <div>ì´ë²ˆ ë¼ìš´ë“œ ì˜¤ë‹µ</div>
        <div class="num wrong" th:text="${rWrong}">0</div>
    </div>
    <div class="card">
        <div>ì´ë²ˆ ë¼ìš´ë“œ í•©ê³„</div>
        <div class="num" th:text="${rTotal}">0</div>
    </div>
</div>

<h3 style="margin-top:20px">ëˆ„ì  í†µê³„</h3>
<div class="grid">
    <div class="card">
        <div>ëˆ„ì  ì •ë‹µ</div>
        <div class="num correct" th:text="${all.correct}">0</div>
    </div>
    <div class="card">
        <div>ëˆ„ì  ì˜¤ë‹µ</div>
        <div class="num wrong" th:text="${all.wrong}">0</div>
    </div>
    <div class="card">
        <div>ëˆ„ì  í’€ì´</div>
        <div class="num" th:text="${all.total}">0</div>
    </div>
</div>

<div class="actions">
    <a th:href="@{/quiz/reset}" class="btn btn--primary">ìƒˆ ë¼ìš´ë“œ ì‹œì‘</a>
    <a th:href="@{/quiz}" class="btn">CRUD í™”ë©´</a>
    <a th:href="@{/}" class="btn">í™ˆ</a>
</div>

<!-- âœ… ìƒìœ„ 10 ë­í‚¹ (ìŠ¹ì¸ ì‚¬ìš©ì ê¸°ì¤€) -->
<h2 style="margin-top:36px">ìƒìœ„ ë­í‚¹ TOP 10</h2>
<table>
    <tr>
        <th>ìˆœìœ„</th><th>ë‹‰ë„¤ì„</th><th>ì •ë‹µ</th><th>ì˜¤ë‹µ</th><th>ì´ í’€ì´</th><th>ì •í™•ë„</th>
    </tr>
    <tr th:each="u, stat : ${rankTop}">
        <td>
      <span th:switch="${stat.count}">
        <span th:case="1" class="medal">ğŸ¥‡</span>
        <span th:case="2" class="medal">ğŸ¥ˆ</span>
        <span th:case="3" class="medal">ğŸ¥‰</span>
        <span th:case="*" th:text="${stat.count}">4</span>
      </span>
        </td>
        <td class="nick" th:text="${u.nickname}">ë‹‰</td>
        <td th:text="${u.answerTrue}">0</td>
        <td th:text="${u.answerFalse}">0</td>
        <td th:text="${u.answerTrue + u.answerFalse}">0</td>
        <td th:text="${#numbers.formatDecimal((u.answerTrue==0 && u.answerFalse==0) ? 0.0 : (100.0 * u.answerTrue / (u.answerTrue + u.answerFalse)), 1, 1)} + '%'">0%</td>
    </tr>
    <tr th:if="${#lists.isEmpty(rankTop)}">
        <td colspan="6">ì•„ì§ ë­í‚¹ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
    </tr>
</table>

<p style="margin-top:8px"><a th:href="@{/rank}">ì „ì²´ ë­í‚¹ ë³´ëŸ¬ê°€ê¸°</a></p>
</body>
</html>
